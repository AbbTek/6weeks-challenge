
@{
    ViewBag.Title = "Dashboard Super Admin";
    Layout = "~/Views/Shared/_LayoutSuperAdmin.cshtml";
}

<h2>6 Weeks Challenge Administrator</h2>
<div class="row">
    <div class="col-md-12" ng-controller="boxController">
        <h3>Boxes</h3>
        <form class="form-inline">
            <button type="submit" class="btn btn-default" ng-click="new()">New Box</button>
        </form>
        <hr />
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Address</th>
                    <th>Active</th>
                    <th>Email manager</th>
                    <th>Logo</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="box in boxes">
                    <td>{{box.Name}}</td>
                    <td>{{box.Address}}</td>
                    <td>{{box.Active}}</td>
                    <td>{{box.EmailManager}}</td>
                    <td><img ng-src="{{box.UrlLogo}}" height="80" /></td>
                    <td>
                        <div>
                            <button type="button" class="btn btn-xs" ng-click="delete(box._id)" confirm="Are you sure that you want delete {{box.Name}}?"  confirm-settings="{size: 'sm'}">
                                <i class="glyphicon glyphicon-remove" tooltip="Delete box" tooltip-placement="right"></i>
                            </button>
                            <button type="button" class="btn btn-xs" ng-click="edit(box)">
                                <i class="glyphicon glyphicon-edit" tooltip="Edit box" tooltip-placement="right"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <div>
            <script type="text/ng-template" id="searchbox.tpl.html">
                <div class="form-group">
                    <input type="text" class="form-control" id="txtAddressBox" placeholder="Search Box" ng-model="$parent.box.Address">
                </div>
            </script>
            <script type="text/ng-template" id="myModalContent.html">
                <form name="boxForm" ng-submit="submitForm(box)" novalidate>
                    <div class="modal-header">
                        <h3 class="modal-title">Box</h3>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group" ng-class="{ 'has-error' : boxForm.Name.$invalid && !boxForm.Name.$pristine }">
                                    <label for="txtNameBox">Name box</label>
                                    <input type="text" class="form-control" id="txtNameBox" name="Name" placeholder="Name box" ng-model="box.Name" required>
                                    <p ng-show="boxForm.Name.$invalid && !boxForm.Name.$pristine" class="help-block">The box name is required.</p>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="form-group" ng-class="{ 'has-error' : boxForm.Email.$invalid && !boxForm.Email.$pristine }">
                                    <label for="txtEmailManager">Email manager</label>
                                    <input type="email" class="form-control" id="txtEmailManager" name="Email" placeholder="Email manager" ng-model="box.EmailManager" required>
                                    <p ng-show="boxForm.Email.$invalid && !boxForm.Email.$pristine" class="help-block">A valid email is required.</p>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="checkbox">
                                    <label>
                                        <input type="checkbox" ng-model="box.Active" />Active
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="form-group" ng-class="{ 'has-error' : boxForm.Email.$invalid && !boxForm.Email.$pristine }">
                                    <label for="txtShortName">Short name box</label>
                                    <input type="text" class="form-control" id="txtShortName" name="ShortName" placeholder="Short name box" ng-model="box.ShortName" required>
                                    <p ng-show="boxForm.ShortName.$invalid && !boxForm.ShortName.$pristine" class="help-block">A short name is required.</p>
                                </div>
                            </div>
                            <div class="col-sm-8">
                                <div class="row">
                                    <div class="col-sm-4">
                                        <div class="form-group">
                                            <button class="btn btn-info" ngf-select="upload($file)" accept="image/*" ngf-max-size="1MB" type="button">Upload logo box</button>
                                        </div>
                                        <progressbar class="progress-striped active" value="uploadProgress" type="success"><b>{{uploadProgress}}%</b></progressbar>
                                    </div>
                                    <div class="col-sm-8">
                                        <img ng-src="{{box.UrlLogo}}" height="80" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="form-group">
                                    <label for="txtAddressBox">Address</label>
                                    <div id="divTextMap">
                                    </div>
                                    <br />
                                    <ui-gmap-google-map center='map.center' zoom='map.zoom'>
                                        <ui-gmap-search-box template="searchbox.template" events="searchbox.events" parentdiv="searchbox.parentdiv"></ui-gmap-search-box>
                                        <ui-gmap-marker coords="marker.coords" idkey="marker.id">
                                        </ui-gmap-marker>
                                    </ui-gmap-google-map>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" type="submit" ng-disabled="boxForm.$invalid">OK</button>
                        <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
                    </div>
                </form>
            </script>
        </div>

    </div>
</div>
@*<div class="row">
    <div class="col-md-12" ng-controller="userController">
        <form>
            <div class="form-group">
                <label for="exampleInputEmail1">Email address</label>
                <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email" ng-model="user.Email">
            </div>
            <div class="form-group">
                <label for="exampleInputPassword1">Password</label>
                <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password" ng-model="user.Password">
            </div>
            <div class="form-group">
                <label for="exampleInputFile">Roles</label>

                <p class="help-block">Example block-level help text here.</p>
            </div>
            <button type="submit" class="btn btn-default" ng-click="create(user)">Create User</button>
        </form>

        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>Email</th>
                    <th>Confirmed</th>
                    <th>Roles</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in users">
                    <td>{{user.Email}}</td>
                    <td>{{user.EmailConfirmed}}</td>
                    <td>
                        <ul>
                            <li ng-repeat="rol in user.Roles">
                                {{rol}}
                            </li>
                        </ul>
                    </td>
                    <td>
                        <button type="button" class="btn btn-primary" ng-click="delete(user._id)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>*@

@section styles {
    <style>
        .angular-google-map-container {
            height: 200px;
        }

        .pac-container {
            z-index: 1051 !important;
        }
    </style>
}

